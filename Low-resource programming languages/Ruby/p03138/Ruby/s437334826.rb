eval'N,K,*A='+`dd`.split*?,;45.downto(r=0){|i|c=A.count{|x|x[i]>0};r+=r.+K==(K%=1<<i)||N<c*2?c:N-c};p r